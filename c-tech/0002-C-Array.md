---
title: C语言基础-数组
date: 2008-01-29
author: SpringSongs
tags: 
  - C语言基础
location: China  
---

## 数组的概念和定义
数组是存储在连续内存位置的项目的集合，可以使用数组的索引随机访问元素。
它们用于存储相同的数据类型的元素，因为对于所有元素，数据类型必须相同。
它们可用于存储原始数据类型的集合，例如任何特定类型的int，float，double，char等。
## 我们为什么需要数组？ 
当对象较少时，可以使用普通变量（v1，v2，v3，..），但是如果要存储大量实例，则很难用普通变量来管理它们。
数组是在一个变量中存储许多个数据。
## 声明数组
要在C中声明数组，程序员可以指定元素的类型和数组所需的元素数量，如下所示：

`DataType arrayName [ arraySize ];`

`arraySize`必须是整数大于零的常数，`DataType`可以是任何有效的C数据类型，
例如我们定义一个数据类型为`int`的`5`个元素的一维数组
``` c
int arr[5];
```
这样我们就在内存里面申请了5个连续的内存空间来存储5个int类型的数据，他们的名字为arr。
``` c
    int arr[]={1,2,3,4,5};
    for (int i = 0; i < 5; i++)
    {
        printf("%d", &arr[i]);
    }
	//输出 -451586208-451586204-451586200-451586196-451586192。
	//可以看到地址是连续的，因为每个int占用4个字节，所以每个地址相差了4。
	//为什么地址从大到小呢，因为每个元素用栈存储，是先进后出的关系，栈底地址是最大的。
```
数组的每一个元素都有一个序号，这个序号从0开始,称为`下标`。访问元素时侯我们指定下标就可以了。`arrayName[index]`
``` c
arr[0];//访问第一个元素
```
## 初始化数组
您可以在定义时初始化数组-通过指定大小和初始化元素进行数组声明，如下所示：
``` c
int arr[5]={1,2,3,4,5};
```
::: danger 提示
这里的{}里面的数组元素不能大于`arraySize`,即数组的长度。
:::
但是您也可以通过以下方式在定义之后分配一个值-通过指定大小声明数组：
``` c
    int arr[5];
    arr[0] = 1;
    arr[1] = 2;
    arr[2] = 3;
    arr[3] = 4;
    arr[4] = 5;
```
::: danger 提示
这里的0、1、2、3、4就是数组下标，a[0]、a[1]、a[2]、a[3]、a[4]就是数组元素。
:::
我们也可以这样初始化数组-通过初始化元素进行数组声明：
``` c
int arr[]={1,2,3,4,5};
```
::: danger 提示
当赋值的元素小于数组元素长度的时候，剩余的元素自动初始化为 0：
1. 如果是short、int、long，就是整数 0；
``` c
	short arr[5]={1,2,3};
    for (int i = 0; i < 5; i++)
    {
        printf("%d", arr[i]);
    }
	//输出 12300
	int arr[5]={1,2,3};
    for (int i = 0; i < 5; i++)
    {
        printf("%d", arr[i]);
    }
	//输出 12300
	
	long arr[5]={1L,2L,3L};
    for (int i = 0; i < 5; i++)
    {
        printf("%lu", arr[i]);
    }
    //输出 12300
```
2. 如果是char，就是字符 '\0'；
3. 如果是float、double，就是小数 0.0。
``` c
    float arr[5]={1.1,1.2,1.3};
    for (int i = 0; i < 5; i++)
    {
        printf("%f ", arr[i]);
    }
    //输出 1.100000 1.200000 1.300000 0.000000 0.000000 
	
	double arr[5]={1.1,1.2,1.3};
    for (int i = 0; i < 5; i++)
    {
        printf("%f ", arr[i]);
    }
    //输出 1.100000 1.200000 1.300000 0.000000 0.000000 
```
:::
## 指定初始化器
C99新增了一个新的特性：指定初始化器。利用该特性可以初始化指定的数组元素。例如只初始化数组中最后一个元素。对于传统的C初始化语法
必须都初始化最后一个元素之前的元素。
```c
int arr[5]={0,0,0,0,5};
```
使用指定初始化器,可以例中带方括号的下标指明待初始化的元素：
``` c
int arr[5]={[4]=5};
```
## 二维数组
二维数组的定义，二维数组定义的一般形式是：
`DataType arrayName[arraySize1][arraySize2];`
其中DataType可以是任何有效的C数据类型，arrayName 为数组名，arraySize1为行数，arraySize2 为列数。
#### 实例
``` c
int arr[2][4];

Row0 arr[0][0] arr[0][1] arr[0][2] arr[0][3];
Row1 arr[1][0] arr[1][1] arr[1][2] arr[1][3];
```
我们定义一个两行四例的数组，一共有8个元素。我们可以用行下标与列下标去访问数组的元素。

## 初始化二维数组
分段赋值
``` c
	int arr[2][4]={
        {1,2,3,4},
        {5,6,7,8},
    };
```
连续赋值
``` c
	int arr[2][4]={1,2,3,4,5,6,7,8};
```

## 访问二维数组元素
通过使用下标（即数组的行索引和列索引）访问二维数组中的元素。例
``` c
	arr[0][1];
```
下面我们遍列二维数组
``` c
#include <stdio.h>
int main(int argc, char const *argv[])
{
    int arr[2][4]={1,2,3,4,5,6,7,8};
    for(int i=0;i<2;i++){
        for(int j=0;j<4;j++){
            printf("a[%d][%d]=%d \n",i,j,arr[i][j]);
        }
    }
    return 0;
}

输出
a[0][0]=1 
a[0][1]=2 
a[0][2]=3 
a[0][3]=4 
a[1][0]=5 
a[1][1]=6 
a[1][2]=7 
a[1][3]=8 
```

::: tip 提示
C中的数组的优点： 
1. 使用数组索引随机访问元素。
2. 使用较少的代码行，因为它创建了多个元素的单个数组。
3. 轻松访问所有元素。
4. 使用单个循环，遍历数组变得很容易。
5. 排序变得很容易，因为可以通过编写更少的代码行来实现。

C中数组的缺点： 
1. 允许输入在声明时确定的固定数量的元素。与链接列表不同，C中的数组不是动态的。
2. 元素的插入和删除可能会很昂贵，因为需要根据新的内存分配来管理元素。
::: 